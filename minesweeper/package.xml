<?xml version="1.0" encoding="UTF-8"?>
<project name="Minesweeper" default="dist" basedir="." xmlns:fx="javafx:com.sun.javafx.tools.ant">
  <!-- Task Definition -->
  <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
           uri="javafx:com.sun.javafx.tools.ant"
           classpath=".:${maven.dependency.com.oracle.ant-javafx.jar.path}"/>

  <fx:application id="minesweeper"
                  name="${project.name}"
                  mainClass="${project.javaFX.mainClass}"/>

  <fx:resources id="appRes">
    <fx:fileset dir="${project.build.directory}" includes="${project.filename}.jar"/>
  </fx:resources>

  <!-- Produces the Jar file with proper manifest -->
  <target name="jar">
    <fx:jar destfile="${project.build.directory}/${project.filename}.jar">
      <fx:application refid="minesweeper"/>
      <manifest>
        <attribute name="Implementation-Vendor" value="${project.vendor}"/>
        <attribute name="Implementation-Title" value="${project.name}"/>
        <attribute name="Implementation-Version" value="1.0"/>
      </manifest>
      <fileset dir="${project.build.outputDirectory}"/>
    </fx:jar>
  </target>

  <target name="deploy" depends="jar">
    <fx:deploy width="260"
               height="300"
               outdir="${project.build.directory}"
               outfile="${project.filename}"
               embedJNLP="true">
      <fx:info title="${project.name}" />
      <fx:application refId="minesweeper"/>
      <fx:resources>
        <fx:fileset dir="${project.build.directory}" includes="${project.filename}.jar"/>
      </fx:resources>
    </fx:deploy>
  </target>
</project>
